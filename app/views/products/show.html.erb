<%= render 'categories/categoriesList' %>

<% if @product.photos.attached? %>
  <%= image_tag @product.photos[@selected_image_index], width: 200 %>
  <div>
    <%= button_to "Anterior", selected_image_index: @selected_image_index - 1, method: :get %>
    <%= button_to "Siguiente", selected_image_index: @selected_image_index + 1, method: :get %>
  </div>
<% end %>

<h1 class="title"><%= @product.title %></h1>
<p class="description"><%= @product.description %></p>
<span class="price"><%= @product.price %></span>
<br>
<% if @product&.tags.present? %>
  <strong>Tags:</strong>
<% end %>
<% @product&.tags.each do |tag| %>
  <%= link_to tag_path(tag.id), class: "tag", id: dom_id(tag) do %>
    <span class="tag"><%= tag.name.capitalize %></span>
  <% end %>
<% end %>

<%= form_with model: @Cart, url: '/carts' do |form| %>
  <%= form.label :title, 'Cantidad:' %>
  <%= form.select :quantity, options_for_select((1..5).to_a), {}, { class: "" } %>
  <%= form.hidden_field :product_id, value: @product.id %>

  <%= form.submit 'ğŸ›’', class: "rounded-lg py-3 px-5 bg-fuchsia-200 text-white inline-block font-medium cursor-pointer" %>
<% end %>

<% if Current.user.present? %>
  <% if Current.user.admin? %>
    <br>
    <br>
    <%= link_to 'Editar este producto', edit_product_path(@product) %>
    <br>
    <br>
    <%= button_to 'Eliminar producto', product_path(@product), method: :delete, data: { turbo_confirm: 'Estas Seguro de elminar este producto?' } %>
  <% else %>
    <!--    NO ES ADMIN-->
  <% end %>
<% else %>
  <!--  NO INICIO SESION-->
<% end %>
<%= render 'tags/tagsFooter' %>

