<%= render 'categories/categoriesList' %>
<div class="flex items-center gap-2 text-gray-600 p-2 mx-2">
  <%= link_to category_path(@product.category_id), class: "underline" do %>
    <%= @productCategoryName %>
  <% end %>
  <span class="text-2xl">&gt;</span>
  <%= @product.title %>
</div>
<article class="text-theme grid grid-cols-1 justify-center justify-items-center gap-2 p-4">
  <h1 class="text-2xl justify-self-start"><%= @product.title %></h1>
  <% if @product.photos.attached? %>
    <%= image_tag @product.photos[@selected_image_index], class: "clip-square", width: 200 %>
    <div class="flex gap-8">
      <%= button_to "Anterior", selected_image_index: @selected_image_index - 1, method: :get %>
      <%= button_to "Siguiente", selected_image_index: @selected_image_index + 1, method: :get %>
    </div>
  <% end %>
  <span class="text-4xl text-center">Q<%= @product.price %></span>
  <p class="description"><%= @product.description %></p>
  <div class="justify-self-stretch">
    <%= form_with model: @Cart, url: '/carts' do |form| %>
      <%= form.label :title, 'Cantidad:' %>
      <%= form.select :quantity, options_for_select((1..5).to_a), {}, { class: "border-0 rounded-xl bg-theme" } %>
      <%= form.hidden_field :product_id, value: @product.id %>
      <br>
      <%= form.submit 'AÃ±adir al carrito ðŸ›’', class: "rounded-lg py-2 px-5 mt-4 bg-theme text-theme inline-block font-medium cursor-pointer grow basis-0 w-full" %>
    <% end %>
  </div>
  <br>
  <% if @product&.tags.present? %>
    <div class="flex gap-2 w-full">
      <strong>Tags:</strong>

      <% @product&.tags.each do |tag| %>
        <%= link_to tag_path(tag.id), class: "tag", id: dom_id(tag) do %>
          <span class="tag underline"><%= tag.name.capitalize %></span>
        <% end %>
      <% end %>
    </div>
  <% end %>
</article>


<% if Current.user.present? %>
  <% if Current.user.admin? %>
    <br>
    <br>
    <%= link_to 'Editar este producto', edit_product_path(@product) %>
    <br>
    <br>
    <%= button_to 'Eliminar producto', product_path(@product), method: :delete, data: { turbo_confirm: 'Estas Seguro de elminar este producto?' } %>
  <% else %>
    <!--    NO ES ADMIN-->
  <% end %>
<% else %>
  <!--  NO INICIO SESION-->
<% end %>
<%= render 'tags/tagsFooter' %>

